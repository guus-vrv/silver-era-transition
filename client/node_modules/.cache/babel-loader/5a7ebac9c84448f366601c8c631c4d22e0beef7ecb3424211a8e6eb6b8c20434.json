{"ast":null,"code":"var _jsxFileName = \"/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/BuyersSellers/SavedProfiles.js\",\n  _s = $RefreshSig$();\n// src/components/MyAccount.js\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useHistory from react-router-dom\nimport axiosInstance from '../Auth/AxiosInstance'; // Assuming AxiosInstance is set up for authenticated requests\nimport { jwtDecode as jwt_decode } from 'jwt-decode'; // if you want to keep calling it jwt_decode\nimport './styles/ProfilesDisplay.css';\nimport DiscoverProfile from './DiscoverProfile';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst SavedProfiles = () => {\n  _s();\n  const navigate = useNavigate();\n  const [activeProfileId, setActiveProfileId] = useState(null);\n  const [message, setMessage] = useState('');\n  const [savedProfiles, setSavedProfiles] = useState([]);\n  const fetchSavedProfiles = async () => {\n    try {\n      const response = await axiosInstance.get(`${API_URL}/api/message/saved`);\n      setSavedProfiles(response.data);\n    } catch (error) {\n      console.error('Error fetching skipped profiles:', error);\n    }\n  };\n  useEffect(() => {\n    fetchSavedProfiles();\n  }, []);\n  const showInvite = profileId => {\n    setActiveProfileId(profileId); // Set the active profile ID to the clicked profile\n  };\n  const closeInvite = () => {\n    setActiveProfileId(null); // Clear the active profile ID to close the pop-up\n  };\n  const handleInvite = async savedProfileId => {\n    // Implement your invite functionality here\n    try {\n      // creates group chat\n\n      const groupChat = await axiosInstance.post(`${API_URL}/api/groupchat/create`, {\n        receiverId: savedProfileId\n      });\n      if (message === '') {\n        setMessage('Hey! Glad to connect!');\n      }\n      const response = await axiosInstance.post(`${API_URL}/api/groupchat/${groupChat.data.groupChat._id}/message`, {\n        message: message // Message content\n      });\n      setMessage('');\n      if (response.status === 201) {\n        alert('Invitation sent successfully!');\n        closeInvite(); // Close the pop-up\n        fetchSavedProfiles();\n      } else {\n        alert(`Failed to send invitation: ${response.data.error}`);\n      }\n    } catch (error) {\n      console.error('Error sending invitation:', error);\n      alert('Failed to send invitation. Please try again later.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profiles-container\",\n    children: savedProfiles.map(profile => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: profile.profile.profilePicture ? `${API_URL}${profile.profile.profilePicture}` : '' // Default image if not available\n        ,\n        alt: profile.profile.name,\n        className: \"profile-picture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"profile-name\",\n        children: profile.profile.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"about-section\",\n        children: profile.profile.introduceYourself\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), profile.hasConnection ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"invite-button\",\n        onClick: () => navigate(`/group-chat/${profile.groupChat._id}`),\n        children: \"View Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this) : activeProfileId !== profile.profile.user ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"invite-button\",\n        onClick: () => showInvite(profile.profile.user),\n        children: \"Invite\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 57\n      }, this) : '', activeProfileId === profile.profile.user && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-box\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invite-box\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invite-profile-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"invite-input\",\n              value: message,\n              onChange: e => setMessage(e.target.value),\n              placeholder: \"Enter your message here...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"invite-button\",\n              onClick: () => handleInvite(profile.profile.user),\n              children: \"Invite to Connect\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"skip-button\",\n              onClick: closeInvite,\n              style: {\n                backgroundColor: 'red'\n              },\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this)]\n    }, profile.profile.user, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(SavedProfiles, \"C1HnKIellTH5hT1wA9cAZgJD0Vw=\", false, function () {\n  return [useNavigate];\n});\n_c = SavedProfiles;\nexport default SavedProfiles;\nvar _c;\n$RefreshReg$(_c, \"SavedProfiles\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axiosInstance","jwtDecode","jwt_decode","DiscoverProfile","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","SavedProfiles","_s","navigate","activeProfileId","setActiveProfileId","message","setMessage","savedProfiles","setSavedProfiles","fetchSavedProfiles","response","get","data","error","console","showInvite","profileId","closeInvite","handleInvite","savedProfileId","groupChat","post","receiverId","_id","status","alert","className","children","map","profile","src","profilePicture","alt","name","fileName","_jsxFileName","lineNumber","columnNumber","introduceYourself","hasConnection","onClick","user","value","onChange","e","target","placeholder","style","backgroundColor","_c","$RefreshReg$"],"sources":["/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/BuyersSellers/SavedProfiles.js"],"sourcesContent":["// src/components/MyAccount.js\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useHistory from react-router-dom\nimport axiosInstance from '../Auth/AxiosInstance'; // Assuming AxiosInstance is set up for authenticated requests\nimport { jwtDecode as jwt_decode } from 'jwt-decode'; // if you want to keep calling it jwt_decode\nimport './styles/ProfilesDisplay.css';\nimport DiscoverProfile from './DiscoverProfile';\n\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst SavedProfiles = () => {\n\n  const navigate = useNavigate();\n  const [activeProfileId, setActiveProfileId] = useState(null);\n  const [message, setMessage] = useState('');\n\n  const [savedProfiles, setSavedProfiles] = useState([]);\n\n  const fetchSavedProfiles = async () => {\n    try {\n      const response = await axiosInstance.get(`${API_URL}/api/message/saved`);\n      setSavedProfiles(response.data);\n    } catch (error) {\n      console.error('Error fetching skipped profiles:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchSavedProfiles();\n  }, []);\n\n  const showInvite = (profileId) => {\n    setActiveProfileId(profileId); // Set the active profile ID to the clicked profile\n  };\n\n  const closeInvite = () => {\n    setActiveProfileId(null); // Clear the active profile ID to close the pop-up\n  };\n\n  const handleInvite = async (savedProfileId) => {\n    // Implement your invite functionality here\n      try {\n        // creates group chat\n        \n        const groupChat = await axiosInstance.post(`${API_URL}/api/groupchat/create`, {\n          receiverId: savedProfileId\n        })\n  \n        if (message === '')\n        {\n          setMessage('Hey! Glad to connect!');\n        }\n  \n        const response = await axiosInstance.post(`${API_URL}/api/groupchat/${groupChat.data.groupChat._id}/message`, {\n          message: message, // Message content\n        });\n  \n        setMessage('');\n  \n        if (response.status === 201) {\n          alert('Invitation sent successfully!');\n          closeInvite(); // Close the pop-up\n          fetchSavedProfiles();\n        } else {\n          alert(`Failed to send invitation: ${response.data.error}`);\n        }\n      } catch (error) {\n        console.error('Error sending invitation:', error);\n        alert('Failed to send invitation. Please try again later.');\n      }\n    };\n\n\n  return (\n    <div className=\"profiles-container\">\n\n        {savedProfiles.map(profile => (\n\n        <div className=\"profile-card\" key={profile.profile.user}>\n          <img\n            src={profile.profile.profilePicture ? `${API_URL}${profile.profile.profilePicture}` : ''} // Default image if not available\n            alt={profile.profile.name}\n            className=\"profile-picture\"\n          />\n          <h3 className=\"profile-name\">{profile.profile.name}</h3>\n          <p className=\"about-section\">{profile.profile.introduceYourself}</p>\n          {profile.hasConnection ? (\n            <button className=\"invite-button\" onClick={() => navigate(`/group-chat/${profile.groupChat._id}`)}>\n            View Chat\n          </button> ) : \n          (\n            activeProfileId !== profile.profile.user ? (<button className=\"invite-button\" onClick={() => showInvite(profile.profile.user)}>\n            Invite\n          </button>) : ''\n            \n          )}\n          \n          {activeProfileId === profile.profile.user && (\n            <div className=\"right-box\">\n              <div className=\"invite-box\">\n                <div className=\"invite-profile-container\">\n                  <textarea\n                    className=\"invite-input\"\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                    placeholder=\"Enter your message here...\"\n                  />\n                  <button\n                    className=\"invite-button\"\n                    onClick={() => handleInvite(profile.profile.user)}\n                  >\n                    Invite to Connect\n                  </button>\n                  <button className=\"skip-button\" onClick={closeInvite} style={{backgroundColor: 'red'}}>\n                    Close\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n            \n          \n          </div>\n          \n        ))}\n    </div>\n    \n  );\n};\n\nexport default SavedProfiles;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}