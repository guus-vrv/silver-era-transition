{"ast":null,"code":"// src/components/MyAccount.js\nimport React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';// Import useHistory from react-router-dom\nimport axiosInstance from'./Auth/AxiosInstance';// Assuming AxiosInstance is set up for authenticated requests\nimport{jwtDecode as jwt_decode}from'jwt-decode';// if you want to keep calling it jwt_decode\nimport'./styles/Settings.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Settings=()=>{const navigate=useNavigate();// useHistory hook to programmatically navigate\nuseEffect(()=>{const fetchUserDetails=async()=>{try{// Make an API call to get the user details\nconst response=await axiosInstance.get(`http://localhost:5001/api/profiles/email`);// Set the email from the response\nsetEmail(response.data.email);}catch(error){console.error('Error fetching user details:',error);setErrorMessage('Failed to load user details');}};fetchUserDetails();// Call the function when the component mounts\n},[]);const[email,setEmail]=useState('');const[oldPassword,setOldPassword]=useState('');const[newPassword,setNewPassword]=useState('');const[successMessage,setSuccessMessage]=useState('');const[errorMessage,setErrorMessage]=useState('');const handleEmailUpdate=async e=>{e.preventDefault();try{setSuccessMessage('');setErrorMessage('');const response=await axiosInstance.put('http://localhost:5001/api/profiles/update-email',{email});setSuccessMessage(response.data.message);}catch(error){console.log(error.response.data.message);setErrorMessage(error.response.data.message);}};const handlePasswordUpdate=async e=>{e.preventDefault();try{setSuccessMessage('');setErrorMessage('');const response=await axiosInstance.put('http://localhost:5001/api/profiles/update-password',{oldPassword,newPassword});setSuccessMessage(response.data.message);}catch(error){setErrorMessage(error.response.data.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"my-account-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"my-account-form\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-account-title\",children:\"My Account\"}),successMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"success-message\",children:successMessage}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEmailUpdate,className:\"form\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-heading\",children:\"Update Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"New Email\",value:email,name:\"email\",className:\"input-field\",onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Update Email\"})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"divider\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePasswordUpdate,className:\"form\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-heading\",children:\"Update Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Current Password\",value:oldPassword,name:\"oldPassword\",className:\"input-field\",onChange:e=>setOldPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"New Password\",name:\"newPassword\",className:\"input-field\",value:newPassword,onChange:e=>setNewPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Update Password\"})]})]})});};export default Settings;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axiosInstance","jwtDecode","jwt_decode","jsx","_jsx","jsxs","_jsxs","Settings","navigate","fetchUserDetails","response","get","setEmail","data","email","error","console","setErrorMessage","oldPassword","setOldPassword","newPassword","setNewPassword","successMessage","setSuccessMessage","errorMessage","handleEmailUpdate","e","preventDefault","put","message","log","handlePasswordUpdate","className","children","onSubmit","type","placeholder","value","name","onChange","target","required"],"sources":["/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/Settings.js"],"sourcesContent":["// src/components/MyAccount.js\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useHistory from react-router-dom\nimport axiosInstance from './Auth/AxiosInstance'; // Assuming AxiosInstance is set up for authenticated requests\nimport { jwtDecode as jwt_decode } from 'jwt-decode'; // if you want to keep calling it jwt_decode\nimport './styles/Settings.css';\n\nconst Settings = () => {\n\n  const navigate = useNavigate(); // useHistory hook to programmatically navigate\n\n  useEffect(() => {\n    const fetchUserDetails = async () => {\n      try {\n          // Make an API call to get the user details\n          const response = await axiosInstance.get(`http://localhost:5001/api/profiles/email`);\n          // Set the email from the response\n          setEmail(response.data.email);\n      }\n       catch (error) {\n        console.error('Error fetching user details:', error);\n        setErrorMessage('Failed to load user details');\n      }\n    };\n\n    fetchUserDetails(); // Call the function when the component mounts\n  }, []);\n  \n  const [email, setEmail] = useState('');\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const handleEmailUpdate = async (e) => {\n    e.preventDefault();\n    try {\n      setSuccessMessage('');\n      setErrorMessage('');\n      const response = await axiosInstance.put('http://localhost:5001/api/profiles/update-email', { email });\n      setSuccessMessage(response.data.message);\n    } catch (error) {\n        console.log(error.response.data.message)\n      setErrorMessage(error.response.data.message);\n    }\n  };\n\n  const handlePasswordUpdate = async (e) => {\n    e.preventDefault();\n    try {\n      setSuccessMessage('');\n      setErrorMessage('');\n      const response = await axiosInstance.put('http://localhost:5001/api/profiles/update-password', {\n        oldPassword,\n        newPassword,\n      });\n      setSuccessMessage(response.data.message);\n      \n\n    } catch (error) {\n        setErrorMessage(error.response.data.message);\n    }\n  };\n\n  return (\n    <div className='my-account-container'>\n        <div className=\"my-account-form\">\n        <h1 className=\"my-account-title\">My Account</h1>\n\n        {/* Success or Error Messages */}\n        {successMessage && <p className=\"success-message\">{successMessage}</p>}\n        {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\n\n        {/* Email Update Form */}\n        <form onSubmit={handleEmailUpdate} className='form' >\n        <h3 className='section-heading'>Update Email</h3>\n        <input\n        type=\"email\"\n        placeholder=\"New Email\"\n        value={email}\n        name=\"email\"\n        className='input-field'\n        onChange={(e) => setEmail(e.target.value)}\n        required\n        />\n        <button type=\"submit\" className='submit-button'>Update Email</button>\n        </form>\n\n        <hr className=\"divider\" />\n\n        {/* Password Update Form */}\n        <form onSubmit={handlePasswordUpdate} className=\"form\">\n        <h3 className='section-heading'>Update Password</h3>\n        <input\n        type=\"password\"\n        placeholder=\"Current Password\"\n        value={oldPassword}\n        name=\"oldPassword\"\n        className='input-field'\n        onChange={(e) => setOldPassword(e.target.value)}\n        required\n        />\n        <input\n        type=\"password\"\n        placeholder=\"New Password\"\n        name=\"newPassword\"\n        className='input-field'\n        value={newPassword}\n        onChange={(e) => setNewPassword(e.target.value)}\n        required\n        />\n        <button type=\"submit\" className='submit-button'>Update Password</button>\n        </form>\n\n        </div>\n    </div>\n  );\n};\n\nexport default Settings;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}