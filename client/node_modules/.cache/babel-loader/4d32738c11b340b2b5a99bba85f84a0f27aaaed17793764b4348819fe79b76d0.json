{"ast":null,"code":"import React,{useState,useEffect}from'react';import axiosInstance from'./Auth/AxiosInstance';import{useParams,useNavigate}from'react-router-dom';import Filters from'./BuyersSellers/Filters';import Room from'./Brokers/Room';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL;// Access the base URL from environment variable\nconst Dashboard=()=>{const[role,setRole]=useState('');const[hasProfile,setHasProfile]=useState(false);const{id}=useParams();// Get the user ID from URL params\nconst[rooms,setRooms]=useState([]);const navigate=useNavigate();useEffect(()=>{// Fetch user role and profile data when component mounts\nconst fetchUserData=async()=>{try{const userResponse=await axiosInstance.get(`${API_URL}/api/user`);setRole(userResponse.data.role);}catch(error){console.error('Error fetching user data:',error);}};const fetchRooms=async()=>{try{const response=await axiosInstance.get(`${API_URL}/api/room`);setRooms(response.data);console.log('RSSS',response.data);}catch(error){console.error('Error fetching room data:',error);}};fetchUserData();fetchRooms();},[id]);const addRoom=()=>{let availableRoomNumber=0;while(rooms.some(room=>room.roomNumber===availableRoomNumber)){availableRoomNumber++;}navigate(`/add-room/${availableRoomNumber}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center',padding:'20px'},children:\"Your Dashboard\"}),role==='broker'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-section\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"clients-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-head-room\",children:\"Room\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-head-phase\",children:\"Phase\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-head-created\",children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-head-updated\",children:\"Updated\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rooms.map((room,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"rooms\",children:[/*#__PURE__*/_jsx(\"td\",{onClick:()=>navigate(`/room/${room.roomNumber}`),className:\"room-cell\",children:room.roomNumber}),/*#__PURE__*/_jsxs(\"td\",{className:\"phase-cell\",children:[\"Phase \",room.phase]}),/*#__PURE__*/_jsx(\"td\",{className:\"created-cell\",children:room.created.split('T')[0]}),/*#__PURE__*/_jsx(\"td\",{className:\"updated-cell\",children:room.updated.split('T')[0]})]},index))})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginTop:'2rem'},className:\"submit-button\",onClick:addRoom,children:\"Add Room\"})]}),(role==='buyer'||role==='seller')&&/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},className:\"dashboard-page\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"dashboard-heading\",style:{marginBottom:\"2rem\"},children:\" Your Filters\"}),/*#__PURE__*/_jsx(Filters,{})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axiosInstance","useParams","useNavigate","Filters","Room","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","Dashboard","role","setRole","hasProfile","setHasProfile","id","rooms","setRooms","navigate","fetchUserData","userResponse","get","data","error","console","fetchRooms","response","log","addRoom","availableRoomNumber","some","room","roomNumber","className","children","style","textAlign","padding","map","index","onClick","phase","created","split","updated","type","marginTop","marginBottom"],"sources":["/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axiosInstance from './Auth/AxiosInstance';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport Filters from './BuyersSellers/Filters';\nimport Room from './Brokers/Room';\n\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst Dashboard = () => {\n  const [role, setRole] = useState('');\n  const [hasProfile, setHasProfile] = useState(false);\n  const { id } = useParams(); // Get the user ID from URL params\n  const [rooms, setRooms] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Fetch user role and profile data when component mounts\n    const fetchUserData = async () => {\n      try {\n        const userResponse = await axiosInstance.get(`${API_URL}/api/user`);\n        setRole(userResponse.data.role);\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n      }\n    };\n\n    const fetchRooms = async () => {\n      try {\n        const response = await axiosInstance.get(`${API_URL}/api/room`);\n        setRooms(response.data);\n        console.log('RSSS', response.data);\n      } catch (error) {\n        console.error('Error fetching room data:', error);\n      }\n    }\n\n    fetchUserData();\n    fetchRooms();\n  }, [id]);\n\n  const addRoom = () => {\n    let availableRoomNumber = 0;\n    while (rooms.some(room => room.roomNumber === availableRoomNumber)) {\n      availableRoomNumber++;\n    }\n    \n    navigate(`/add-room/${availableRoomNumber}`);\n   \n  }\n\n  return (\n    <div className=\"dashboard-container\">\n\n      <h2 style={{textAlign: 'center', padding: '20px'}}>Your Dashboard</h2>\n\n      {/* Broker Section */}\n      {role === 'broker' && (\n        <div>\n\n          <div className=\"dashboard-section\">\n            <table className=\"clients-table\">\n            <thead>\n              <tr>\n                <th className=\"table-head-room\">Room</th>\n                <th className=\"table-head-phase\">Phase</th>\n                <th className=\"table-head-created\">Created</th>\n                <th className=\"table-head-updated\">Updated</th>\n              </tr>\n            </thead>\n            <tbody>\n              {rooms.map((room, index) => (\n                <tr className=\"rooms\" key={index}>\n                  <td\n                    onClick={() => navigate(`/room/${room.roomNumber}`)}\n                    className=\"room-cell\"\n                  >\n                    {room.roomNumber}\n                  </td>\n                  <td className=\"phase-cell\">Phase {room.phase}</td>\n                  <td className=\"created-cell\">{room.created.split('T')[0]}</td>\n                  <td className=\"updated-cell\">{room.updated.split('T')[0]}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n\n        \n          \n          </div>\n\n         <button type=\"submit\" style={{marginTop: '2rem'}} className=\"submit-button\" onClick={addRoom}>Add Room</button>\n\n      </div>\n      )}\n\n      {/* Buyer/Seller Profile Section */}\n      {(role === 'buyer' || role === 'seller') && (\n        <div style={{textAlign: 'center'}} className='dashboard-page'>\n        <h2 className=\"dashboard-heading\" style={{marginBottom: \"2rem\"}}> Your Filters</h2>\n        <Filters />\n      </div>\n      )}\n\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}