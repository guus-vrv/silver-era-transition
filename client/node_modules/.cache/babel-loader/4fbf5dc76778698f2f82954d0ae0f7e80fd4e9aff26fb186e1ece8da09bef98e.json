{"ast":null,"code":"var _jsxFileName = \"/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/Auth/Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport './styles/Auth.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst Register = () => {\n  _s();\n  console.log(\"Register rendered\");\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    role: 'broker',\n    brokerEmail: '' // Add brokerEmail to the state\n  });\n  const [error, setError] = useState(''); // State to hold error messages\n  const {\n    name,\n    email,\n    password,\n    role,\n    brokerEmail\n  } = formData;\n  const navigate = useNavigate();\n  const onChange = e => setFormData({\n    ...formData,\n    [e.target.name]: e.target.value\n  });\n  const onSubmit = async e => {\n    e.preventDefault(); // prevent page reload\n    setError(''); // Clear any previous errors\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      const body = JSON.stringify({\n        name,\n        email,\n        password,\n        role,\n        brokerEmail: role === 'buyer' || role === 'seller' ? brokerEmail : undefined\n      });\n      console.log(config);\n      const res = await axios.post(`${API_URL}/api/auth/register`, body, config); // make API request to back-end server\n      console.log(res.data); // Handle successful registration\n      navigate('/login');\n    } catch (err) {\n      if (err.response) {\n        // Check if the response contains 'errors' (an array of error objects)\n        if (err.response.data.errors) {\n          // If errors exist, concatenate all error messages\n          setError(err.response.data.errors.map(error => error.msg).join(', '));\n        } else if (err.response.data.msg) {\n          // If it's a single error message, use it\n          setError(err.response.data.msg);\n        } else {\n          setError('Unknown server error');\n        }\n      } else {\n        setError('Server Error');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"register-title\",\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"register-form\",\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Name\",\n        name: \"name\",\n        value: name,\n        onChange: onChange,\n        className: \"input-field\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email\",\n        name: \"email\",\n        value: email,\n        onChange: onChange,\n        className: \"input-field\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        name: \"password\",\n        value: password,\n        onChange: onChange,\n        className: \"input-field\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"role\",\n        value: role,\n        onChange: onChange,\n        className: \"input-field\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"broker\",\n          children: \"Broker\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"buyer\",\n          children: \"Buyer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"seller\",\n          children: \"Seller\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), (role === 'buyer' || role === 'seller') && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Broker Email\",\n        name: \"brokerEmail\",\n        value: brokerEmail,\n        onChange: onChange,\n        className: \"input-field\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"submit-button\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/login\",\n      className: \"register-link\",\n      children: \"Go to Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Register, \"fg3FLldsq9djEgI0BJ+ykXJZ0rk=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","axios","useNavigate","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","Register","_s","console","log","formData","setFormData","name","email","password","role","brokerEmail","error","setError","navigate","onChange","e","target","value","onSubmit","preventDefault","config","headers","body","JSON","stringify","undefined","res","post","data","err","response","errors","map","msg","join","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","required","href","_c","$RefreshReg$"],"sources":["/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/Auth/Register.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport './styles/Auth.css';\n\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst Register = () => {\n  console.log(\"Register rendered\");\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    role: 'broker',\n    brokerEmail: '' // Add brokerEmail to the state\n  });\n\n  const [error, setError] = useState(''); // State to hold error messages\n  const { name, email, password, role, brokerEmail} = formData;\n  const navigate = useNavigate();\n\n  const onChange = e =>\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n\n  const onSubmit = async e => {\n    e.preventDefault(); // prevent page reload\n    setError(''); // Clear any previous errors\n\n    try {\n      const config = {\n        headers: { 'Content-Type': 'application/json' },\n      };\n      const body = JSON.stringify({ name, email, password, role, brokerEmail: (role === 'buyer' || role === 'seller') ? brokerEmail : undefined });\n      console.log(config);\n      const res = await axios.post(`${API_URL}/api/auth/register`, body, config); // make API request to back-end server\n      console.log(res.data); // Handle successful registration\n      navigate('/login');\n    } catch (err) {\n      if (err.response) {\n        // Check if the response contains 'errors' (an array of error objects)\n        if (err.response.data.errors) {\n          // If errors exist, concatenate all error messages\n          setError(err.response.data.errors.map((error) => error.msg).join(', '));\n        } else if (err.response.data.msg) {\n          // If it's a single error message, use it\n          setError(err.response.data.msg);\n        } else {\n          setError('Unknown server error');\n        }\n      } else {\n        setError('Server Error');\n      }\n    }\n  };\n\n  return (\n    <div className=\"register-container\">\n      <h1 className=\"register-title\">Register</h1>\n      {error && <div className=\"error-message\">{error}</div>} {/* Display error message */}\n      <form className=\"register-form\" onSubmit={onSubmit}>\n        <input\n          type=\"text\"\n          placeholder=\"Name\"\n          name=\"name\"\n          value={name}\n          onChange={onChange}\n          className=\"input-field\"\n          required\n        />\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          name=\"email\"\n          value={email}\n          onChange={onChange}\n          className=\"input-field\"\n          required\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          name=\"password\"\n          value={password}\n          onChange={onChange}\n          className=\"input-field\"\n          required\n        />\n        <select\n          name=\"role\"\n          value={role}\n          onChange={onChange}\n          className=\"input-field\"\n        >\n          <option value=\"broker\">Broker</option>\n          <option value=\"buyer\">Buyer</option>\n          <option value=\"seller\">Seller</option>\n        </select>\n\n        {/* Conditionally render broker email input for buyers and sellers */}\n        {(role === 'buyer' || role === 'seller') && (\n          <input\n            type=\"email\"\n            placeholder=\"Broker Email\"\n            name=\"brokerEmail\"\n            value={brokerEmail}\n            onChange={onChange}\n            className=\"input-field\"\n            required\n          />\n        )}\n\n        <button type=\"submit\" className=\"submit-button\">Register</button>\n      </form>\n\n      <a href=\"/login\" className=\"register-link\">Go to Login</a>\n    </div>\n  );\n};\n\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}