{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./styles/Auth.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL;// Access the base URL from environment variable\nconst Register=()=>{console.log(\"Register rendered\");const[formData,setFormData]=useState({name:'',email:'',password:'',role:'broker',brokerEmail:''// Add brokerEmail to the state\n});const[error,setError]=useState('');// State to hold error messages\nconst{name,email,password,role,brokerEmail}=formData;const navigate=useNavigate();const onChange=e=>setFormData({...formData,[e.target.name]:e.target.value});const onSubmit=async e=>{e.preventDefault();// prevent page reload\nsetError('');// Clear any previous errors\ntry{const config={headers:{'Content-Type':'application/json'}};const body=JSON.stringify({name,email,password,role,brokerEmail:role==='buyer'||role==='seller'?brokerEmail:undefined});console.log(config);const res=await axios.post(`${API_URL}/api/auth/register`,body,config);// make API request to back-end server\nconsole.log(res.data);// Handle successful registration\nnavigate('/login');}catch(err){if(err.response){// Check if the response contains 'errors' (an array of error objects)\nif(err.response.data.errors){// If errors exist, concatenate all error messages\nsetError(err.response.data.errors.map(error=>error.msg).join(', '));}else if(err.response.data.msg){// If it's a single error message, use it\nsetError(err.response.data.msg);}else{setError('Unknown server error');}}else{setError('Server Error');}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"register-title\",children:\"Register\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),\" \",/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",name:\"name\",value:name,onChange:onChange,className:\"input-field\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",name:\"email\",value:email,onChange:onChange,className:\"input-field\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",name:\"password\",value:password,onChange:onChange,className:\"input-field\",required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",value:role,onChange:onChange,className:\"input-field\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"broker\",children:\"Broker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"buyer\",children:\"Buyer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"seller\",children:\"Seller\"})]}),(role==='buyer'||role==='seller')&&/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Broker Email\",name:\"brokerEmail\",value:brokerEmail,onChange:onChange,className:\"input-field\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Register\"})]}),/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"register-link\",children:\"Go to Login\"})]});};export default Register;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","Register","console","log","formData","setFormData","name","email","password","role","brokerEmail","error","setError","navigate","onChange","e","target","value","onSubmit","preventDefault","config","headers","body","JSON","stringify","undefined","res","post","data","err","response","errors","map","msg","join","className","children","type","placeholder","required","href"],"sources":["/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/Auth/Register.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport './styles/Auth.css';\n\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst Register = () => {\n  console.log(\"Register rendered\");\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    role: 'broker',\n    brokerEmail: '' // Add brokerEmail to the state\n  });\n\n  const [error, setError] = useState(''); // State to hold error messages\n  const { name, email, password, role, brokerEmail} = formData;\n  const navigate = useNavigate();\n\n  const onChange = e =>\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n\n  const onSubmit = async e => {\n    e.preventDefault(); // prevent page reload\n    setError(''); // Clear any previous errors\n\n    try {\n      const config = {\n        headers: { 'Content-Type': 'application/json' },\n      };\n      const body = JSON.stringify({ name, email, password, role, brokerEmail: (role === 'buyer' || role === 'seller') ? brokerEmail : undefined });\n      console.log(config);\n      const res = await axios.post(`${API_URL}/api/auth/register`, body, config); // make API request to back-end server\n      console.log(res.data); // Handle successful registration\n      navigate('/login');\n    } catch (err) {\n      if (err.response) {\n        // Check if the response contains 'errors' (an array of error objects)\n        if (err.response.data.errors) {\n          // If errors exist, concatenate all error messages\n          setError(err.response.data.errors.map((error) => error.msg).join(', '));\n        } else if (err.response.data.msg) {\n          // If it's a single error message, use it\n          setError(err.response.data.msg);\n        } else {\n          setError('Unknown server error');\n        }\n      } else {\n        setError('Server Error');\n      }\n    }\n  };\n\n  return (\n    <div className=\"register-container\">\n      <h1 className=\"register-title\">Register</h1>\n      {error && <div className=\"error-message\">{error}</div>} {/* Display error message */}\n      <form className=\"register-form\" onSubmit={onSubmit}>\n        <input\n          type=\"text\"\n          placeholder=\"Name\"\n          name=\"name\"\n          value={name}\n          onChange={onChange}\n          className=\"input-field\"\n          required\n        />\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          name=\"email\"\n          value={email}\n          onChange={onChange}\n          className=\"input-field\"\n          required\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          name=\"password\"\n          value={password}\n          onChange={onChange}\n          className=\"input-field\"\n          required\n        />\n        <select\n          name=\"role\"\n          value={role}\n          onChange={onChange}\n          className=\"input-field\"\n        >\n          <option value=\"broker\">Broker</option>\n          <option value=\"buyer\">Buyer</option>\n          <option value=\"seller\">Seller</option>\n        </select>\n\n        {/* Conditionally render broker email input for buyers and sellers */}\n        {(role === 'buyer' || role === 'seller') && (\n          <input\n            type=\"email\"\n            placeholder=\"Broker Email\"\n            name=\"brokerEmail\"\n            value={brokerEmail}\n            onChange={onChange}\n            className=\"input-field\"\n            required\n          />\n        )}\n\n        <button type=\"submit\" className=\"submit-button\">Register</button>\n      </form>\n\n      <a href=\"/login\" className=\"register-link\">Go to Login</a>\n    </div>\n  );\n};\n\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}