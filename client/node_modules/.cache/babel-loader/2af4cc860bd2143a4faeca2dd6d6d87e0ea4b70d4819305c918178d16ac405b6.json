{"ast":null,"code":"var _jsxFileName = \"/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/BuyersSellers/SkippedProfiles.js\",\n  _s = $RefreshSig$();\n// src/components/MyAccount.js\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useHistory from react-router-dom\nimport axiosInstance from '../Auth/AxiosInstance'; // Assuming AxiosInstance is set up for authenticated requests\nimport { jwtDecode as jwt_decode } from 'jwt-decode'; // if you want to keep calling it jwt_decode\nimport './styles/ProfilesDisplay.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst SkippedProfiles = () => {\n  _s();\n  const [skippedProfiles, setSkippedProfiles] = useState([]);\n  const navigate = useNavigate();\n  const [activeProfileId, setActiveProfileId] = useState(null);\n  const [message, setMessage] = useState('');\n  const fetchSkippedProfiles = async () => {\n    try {\n      const response = await axiosInstance.get(`${API_URL}/api/message/skipped`);\n      setSkippedProfiles(response.data);\n    } catch (error) {\n      console.error('Error fetching skipped profiles:', error);\n    }\n  };\n  useEffect(() => {\n    fetchSkippedProfiles();\n  }, []);\n  const showInvite = profileId => {\n    setActiveProfileId(profileId); // Set the active profile ID to the clicked profile\n  };\n  const closeInvite = () => {\n    setActiveProfileId(null); // Clear the active profile ID to close the pop-up\n  };\n  const handleInvite = async skippedProfileId => {\n    // Implement your invite functionality here\n    try {\n      // creates group chat\n\n      const groupChat = await axiosInstance.post(`${API_URL}/api/groupchat/create`, {\n        receiverId: skippedProfileId\n      });\n      if (message === '') {\n        setMessage('Hey! Glad to connect!');\n      }\n      const response = await axiosInstance.post(`${API_URL}/api/groupchat/${groupChat.data.groupChat._id}/message`, {\n        message: message // Message content\n      });\n      setMessage('');\n      if (response.status === 201) {\n        alert('Invitation sent successfully!');\n        closeInvite(); // Close the pop-up\n        fetchSkippedProfiles();\n      } else {\n        alert(`Failed to send invitation: ${response.data.error}`);\n      }\n    } catch (error) {\n      console.error('Error sending invitation:', error);\n      alert('Failed to send invitation. Please try again later.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profiles-container\",\n    children: skippedProfiles.map(profile => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: profile.profile.profilePicture ? `${API_URL}${profile.profile.profilePicture}` : '' // Default image if not available\n        ,\n        alt: profile.profile.name,\n        className: \"profile-picture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"profile-name\",\n        children: profile.profile.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"about-section\",\n        children: profile.profile.introduceYourself\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), profile.hasConnection ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"invite-button\",\n        onClick: () => navigate(`/group-chat/${profile.groupChat._id}`),\n        children: \"View Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }, this) : activeProfileId !== profile.profile.user ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"invite-button\",\n        onClick: () => showInvite(profile.profile.user),\n        children: \"Invite\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 59\n      }, this) : '', activeProfileId === profile.profile.user && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-box\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invite-box\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invite-profile-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"invite-input\",\n              value: message,\n              onChange: e => setMessage(e.target.value),\n              placeholder: \"Enter your message here...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"invite-button\",\n              onClick: () => handleInvite(profile.profile.user),\n              children: \"Invite to Connect\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"skip-button\",\n              onClick: closeInvite,\n              style: {\n                backgroundColor: 'red'\n              },\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this)]\n    }, profile.profile.user, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 7\n  }, this);\n};\n_s(SkippedProfiles, \"99ob+z3JrWfs37H/BVw+QdLiYRE=\", false, function () {\n  return [useNavigate];\n});\n_c = SkippedProfiles;\nexport default SkippedProfiles;\nvar _c;\n$RefreshReg$(_c, \"SkippedProfiles\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axiosInstance","jwtDecode","jwt_decode","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","SkippedProfiles","_s","skippedProfiles","setSkippedProfiles","navigate","activeProfileId","setActiveProfileId","message","setMessage","fetchSkippedProfiles","response","get","data","error","console","showInvite","profileId","closeInvite","handleInvite","skippedProfileId","groupChat","post","receiverId","_id","status","alert","className","children","map","profile","src","profilePicture","alt","name","fileName","_jsxFileName","lineNumber","columnNumber","introduceYourself","hasConnection","onClick","user","value","onChange","e","target","placeholder","style","backgroundColor","_c","$RefreshReg$"],"sources":["/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/BuyersSellers/SkippedProfiles.js"],"sourcesContent":["// src/components/MyAccount.js\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useHistory from react-router-dom\nimport axiosInstance from '../Auth/AxiosInstance'; // Assuming AxiosInstance is set up for authenticated requests\nimport { jwtDecode as jwt_decode } from 'jwt-decode'; // if you want to keep calling it jwt_decode\nimport './styles/ProfilesDisplay.css';\n\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst SkippedProfiles = () => {\n\n  const [skippedProfiles, setSkippedProfiles] = useState([]);\n  const navigate = useNavigate();\n  const [activeProfileId, setActiveProfileId] = useState(null);\n  const [message, setMessage] = useState('');\n\n  const fetchSkippedProfiles = async () => {\n    try {\n      const response = await axiosInstance.get(`${API_URL}/api/message/skipped`);\n      setSkippedProfiles(response.data);\n    } catch (error) {\n      console.error('Error fetching skipped profiles:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchSkippedProfiles();\n  }, []);\n\n  const showInvite = (profileId) => {\n    setActiveProfileId(profileId); // Set the active profile ID to the clicked profile\n  };\n\n  const closeInvite = () => {\n    setActiveProfileId(null); // Clear the active profile ID to close the pop-up\n  };\n\n  const handleInvite = async (skippedProfileId) => {\n    // Implement your invite functionality here\n      try {\n        // creates group chat\n        \n        const groupChat = await axiosInstance.post(`${API_URL}/api/groupchat/create`, {\n          receiverId: skippedProfileId\n        })\n  \n        if (message === '')\n        {\n          setMessage('Hey! Glad to connect!');\n        }\n  \n        const response = await axiosInstance.post(`${API_URL}/api/groupchat/${groupChat.data.groupChat._id}/message`, {\n          message: message, // Message content\n        });\n  \n        setMessage('');\n  \n        if (response.status === 201) {\n          alert('Invitation sent successfully!');\n          closeInvite(); // Close the pop-up\n          fetchSkippedProfiles();\n        } else {\n          alert(`Failed to send invitation: ${response.data.error}`);\n        }\n      } catch (error) {\n        console.error('Error sending invitation:', error);\n        alert('Failed to send invitation. Please try again later.');\n      }\n    };\n\n  return (\n      <div className=\"profiles-container\">\n  \n          {skippedProfiles.map(profile => (\n  \n          <div className=\"profile-card\" key={profile.profile.user}>\n            <img\n              src={profile.profile.profilePicture ? `${API_URL}${profile.profile.profilePicture}` : ''} // Default image if not available\n              alt={profile.profile.name}\n              className=\"profile-picture\"\n            />\n            <h3 className=\"profile-name\">{profile.profile.name}</h3>\n            <p className=\"about-section\">{profile.profile.introduceYourself}</p>\n            {profile.hasConnection ? (\n              <button className=\"invite-button\" onClick={() => navigate(`/group-chat/${profile.groupChat._id}`)}>\n              View Chat\n            </button> ) : \n            (\n              activeProfileId !== profile.profile.user ? (<button className=\"invite-button\" onClick={() => showInvite(profile.profile.user)}>\n              Invite\n            </button>) : ''\n              \n            )}\n            \n            {activeProfileId === profile.profile.user && (\n            <div className=\"right-box\">\n              <div className=\"invite-box\">\n                <div className=\"invite-profile-container\">\n                  <textarea\n                    className=\"invite-input\"\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                    placeholder=\"Enter your message here...\"\n                  />\n                  <button\n                    className=\"invite-button\"\n                    onClick={() => handleInvite(profile.profile.user)}\n                  >\n                    Invite to Connect\n                  </button>\n                  <button className=\"skip-button\" onClick={closeInvite} style={{backgroundColor: 'red'}}>\n                    Close\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n              \n            \n            </div>\n            \n          ))}\n      </div>\n      \n  );\n};\n\nexport default SkippedProfiles;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}