{"ast":null,"code":"import{useNavigate,Link}from'react-router-dom';import React,{useEffect,useState}from'react';import axiosInstance from'../Auth/AxiosInstance';import'./styles/BasicsForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL;// Access the base URL from environment variable\nconst BuyerPreferences=_ref=>{let{onComplete}=_ref;// Define the form state\nconst[role,setRole]=useState('');const[formData,setFormData]=useState({profilePicture:{type:String,default:''},profilePicturePreview:'',// Preview URL for the uploaded picture\ntimeFrame:'',typeOfSale:'',buyerIndustry:'',// buyer only\nbuyerLocation:'',// buyer only\nsellerIndustry:'',// seller only\nsellerLocation:'',// seller only\ndescriptionOfIdealMatch:'',completedPages:[]});const[error,setError]=useState('');const[success,setSuccess]=useState('');const navigate=useNavigate();useEffect(()=>{const fetchProfile=async()=>{try{const res=await axiosInstance.get(`${API_URL}/api/profiles`);const profilePictureUrl=res.data.profilePicture?`${API_URL}${res.data.profilePicture}`:'';// Construct full URL\nsetRole(res.data.user.role);setFormData(res.data);setFormData(prev=>({...prev,profilePicturePreview:profilePictureUrl// Set initial preview from fetched data\n}));}catch(err){if(err.response&&err.response.status===404){alert('No profile information found for this user.');}else{alert('Error retrieving profile data.');}}};fetchProfile();},[]);// Handle form changes\nconst handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();try{// Now send the rest of the form data\nawait axiosInstance.put(`${API_URL}/api/profiles`,{...formData,completedPages:formData.completedPages.includes(\"BuyerPreferences\")?formData.completedPages:[...formData.completedPages,\"BuyerPreferences\"]});setSuccess('Successfully saved profile!');onComplete();}catch(error){console.error('Error updating profile:',error);setError('Error occurred: ',error.message);}};return/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),\" \",success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),\" \",/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"basics-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:formData.profilePicturePreview&&/*#__PURE__*/_jsx(\"img\",{src:formData.profilePicturePreview,alt:\"Profile\",className:\"profile-picture\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"timeFrame\",children:\"Timeframe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"timeFrame\",name:\"timeFrame\",value:formData.timeFrame,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"typeOfSale\",children:\"Type Of Sale\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"typeOfSale\",name:\"typeOfSale\",value:formData.typeOfSale,onChange:handleChange,required:true})]}),role==='buyer'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"buyerIndustry\",children:\"Buyer Industry\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"buyerIndustry\",name:\"buyerIndustry\",value:formData.buyerIndustry,onChange:handleChange,required:true})]}),role==='seller'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sellerIndustry\",children:\"Seller Industry\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"sellerIndustry\",name:\"sellerIndustry\",value:formData.sellerIndustry,onChange:handleChange,required:true})]}),role==='buyer'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"buyerLocation\",children:\"Buyer Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"buyerLocation\",name:\"buyerLocation\",value:formData.buyerLocation,onChange:handleChange,required:true})]}),role==='seller'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sellerLocation\",children:\"Seller Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"sellerLocation\",name:\"sellerLocation\",value:formData.sellerLocation,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"descriptionOfIdealMatch\",children:\"Description Of Ideal Match\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"descriptionOfIdealMatch\",name:\"descriptionOfIdealMatch\",value:formData.descriptionOfIdealMatch,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"Save Profile\"})]})]});};export default BuyerPreferences;","map":{"version":3,"names":["useNavigate","Link","React","useEffect","useState","axiosInstance","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","BuyerPreferences","_ref","onComplete","role","setRole","formData","setFormData","profilePicture","type","String","default","profilePicturePreview","timeFrame","typeOfSale","buyerIndustry","buyerLocation","sellerIndustry","sellerLocation","descriptionOfIdealMatch","completedPages","error","setError","success","setSuccess","navigate","fetchProfile","res","get","profilePictureUrl","data","user","prev","err","response","status","alert","handleChange","e","name","value","target","handleSubmit","preventDefault","put","includes","console","message","children","className","onSubmit","src","alt","htmlFor","id","onChange","required"],"sources":["/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/BuyersSellers/BuyerPreferences.js"],"sourcesContent":["import { useNavigate, Link } from 'react-router-dom';\nimport React, { useEffect, useState } from 'react';\nimport axiosInstance from '../Auth/AxiosInstance';\nimport './styles/BasicsForm.css';\n\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst BuyerPreferences = ({onComplete}) => {\n  // Define the form state\n  const [role, setRole] = useState('');\n  const [formData, setFormData] = useState({\n    profilePicture: {\n        type: String,\n        default: ''\n    },\n    profilePicturePreview: '', // Preview URL for the uploaded picture\n    timeFrame: '',\n    typeOfSale: '',\n    buyerIndustry: '', // buyer only\n    buyerLocation: '', // buyer only\n    sellerIndustry: '', // seller only\n    sellerLocation: '', // seller only\n    descriptionOfIdealMatch: '',\n    completedPages: []\n  });\n\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n        try {\n            const res = await axiosInstance.get(`${API_URL}/api/profiles`);\n            const profilePictureUrl = res.data.profilePicture ? `${API_URL}${res.data.profilePicture}` : ''; // Construct full URL\n            setRole(res.data.user.role);\n            setFormData(res.data);\n            setFormData((prev) => ({\n                ...prev,\n                profilePicturePreview: profilePictureUrl, // Set initial preview from fetched data\n              }));\n        } catch (err) {\n            if (err.response && err.response.status === 404) {\n                alert('No profile information found for this user.');\n            } else {\n                alert('Error retrieving profile data.');\n            }\n        }\n    };\n\n    fetchProfile();\n}, []);\n\n  // Handle form changes\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n  };\n\n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n\n      // Now send the rest of the form data\n      await axiosInstance.put(`${API_URL}/api/profiles`, {...formData, completedPages: formData.completedPages.includes(\"BuyerPreferences\") ? formData.completedPages : [...formData.completedPages, \"BuyerPreferences\"]});\n      setSuccess('Successfully saved profile!');        \n      onComplete();\n\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      setError('Error occurred: ', error.message);\n    }\n  };\n\n\n  return (\n\n    <div>\n    {error && <div className=\"error-message\">{error}</div>} {/* Display error message */}\n    {success && <div className=\"success-message\">{success}</div>} {/* Display error message */}\n\n    <form onSubmit={handleSubmit} className=\"basics-form\">\n       {/* Profile Picture Upload */}\n      <div className=\"form-group\">\n        {formData.profilePicturePreview && (\n           <img src={formData.profilePicturePreview} alt=\"Profile\" className=\"profile-picture\" />\n        )}\n      </div>\n\n      <div className=\"form-group\">\n          <label htmlFor=\"timeFrame\">Timeframe</label>\n          <input\n            type=\"text\"\n            id=\"timeFrame\"\n            name=\"timeFrame\"\n            value={formData.timeFrame}\n            onChange={handleChange}\n            required\n          />\n        </div>\n  \n\n      <div className=\"form-group\">\n        <label htmlFor=\"typeOfSale\">Type Of Sale</label>\n        <input\n          type=\"text\"\n          id=\"typeOfSale\"\n          name=\"typeOfSale\"\n          value={formData.typeOfSale}\n          onChange={handleChange}\n          required\n        />\n      </div>\n\n      {role === 'buyer' && (\n      <div className=\"form-group\">\n        <label htmlFor=\"buyerIndustry\">Buyer Industry</label>\n        <input\n          type=\"text\"\n          id=\"buyerIndustry\"\n          name=\"buyerIndustry\"\n          value={formData.buyerIndustry}\n          onChange={handleChange}\n          required\n        />\n      </div>\n      )}\n\n      {role === 'seller' && (\n      <div className=\"form-group\">\n        <label htmlFor=\"sellerIndustry\">Seller Industry</label>\n        <input\n          type=\"text\"\n          id=\"sellerIndustry\"\n          name=\"sellerIndustry\"\n          value={formData.sellerIndustry}\n          onChange={handleChange}\n          required\n        />\n      </div>\n      )}\n\n      {role === 'buyer' && (\n      <div className=\"form-group\">\n        <label htmlFor=\"buyerLocation\">Buyer Location</label>\n        <input\n          type=\"text\"\n          id=\"buyerLocation\"\n          name=\"buyerLocation\"\n          value={formData.buyerLocation}\n          onChange={handleChange}\n          required\n        />\n      </div>\n      )}\n\n      {role === 'seller' && (\n      <div className=\"form-group\">\n        <label htmlFor=\"sellerLocation\">Seller Location</label>\n        <input\n          type=\"text\"\n          id=\"sellerLocation\"\n          name=\"sellerLocation\"\n          value={formData.sellerLocation}\n          onChange={handleChange}\n          required\n        />\n      </div>\n      )}\n  \n      <div className=\"form-group\">\n        <label htmlFor=\"descriptionOfIdealMatch\">Description Of Ideal Match</label>\n        <input\n          type=\"text\"\n          id=\"descriptionOfIdealMatch\"\n          name=\"descriptionOfIdealMatch\"\n          value={formData.descriptionOfIdealMatch}\n          onChange={handleChange}\n          required\n        />\n      </div>\n\n      <button type=\"submit\" className=\"submit-btn\">\n        Save Profile\n      </button>\n\n    </form>\n\n    </div>\n  );\n};\n\nexport default BuyerPreferences;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}