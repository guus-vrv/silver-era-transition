{"ast":null,"code":"// src/components/MyAccount.js\nimport React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';// Import useHistory from react-router-dom\nimport axiosInstance from'../Auth/AxiosInstance';// Assuming AxiosInstance is set up for authenticated requests\nimport{jwtDecode as jwt_decode}from'jwt-decode';// if you want to keep calling it jwt_decode\nimport'./styles/ProfilesDisplay.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL;// Access the base URL from environment variable\nconst SkippedProfiles=()=>{const[skippedProfiles,setSkippedProfiles]=useState([]);const navigate=useNavigate();const[activeProfileId,setActiveProfileId]=useState(null);const[message,setMessage]=useState('');const fetchSkippedProfiles=async()=>{try{const response=await axiosInstance.get(`${API_URL}/api/message/skipped`);setSkippedProfiles(response.data);}catch(error){console.error('Error fetching skipped profiles:',error);}};useEffect(()=>{fetchSkippedProfiles();},[]);const showInvite=profileId=>{setActiveProfileId(profileId);// Set the active profile ID to the clicked profile\n};const closeInvite=()=>{setActiveProfileId(null);// Clear the active profile ID to close the pop-up\n};const handleInvite=async skippedProfileId=>{// Implement your invite functionality here\ntry{// creates group chat\nconst groupChat=await axiosInstance.post(`${API_URL}/api/groupchat/create`,{receiverId:skippedProfileId});if(message===''){setMessage('Hey! Glad to connect!');}const response=await axiosInstance.post(`${API_URL}/api/groupchat/${groupChat.data.groupChat._id}/message`,{message:message// Message content\n});setMessage('');if(response.status===201){alert('Invitation sent successfully!');closeInvite();// Close the pop-up\nfetchSkippedProfiles();}else{alert(`Failed to send invitation: ${response.data.error}`);}}catch(error){console.error('Error sending invitation:',error);alert('Failed to send invitation. Please try again later.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"profiles-container\",children:skippedProfiles.map(profile=>/*#__PURE__*/_jsxs(\"div\",{className:\"profile-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:profile.profile.profilePicture?`${API_URL}${profile.profile.profilePicture}`:''// Default image if not available\n,alt:profile.profile.name,className:\"profile-picture\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"profile-name\",children:profile.profile.name}),/*#__PURE__*/_jsx(\"p\",{className:\"about-section\",children:profile.profile.introduceYourself}),profile.hasConnection?/*#__PURE__*/_jsx(\"button\",{className:\"invite-button\",onClick:()=>navigate(`/group-chat/${profile.groupChat._id}`),children:\"View Chat\"}):activeProfileId!==profile.profile.user?/*#__PURE__*/_jsx(\"button\",{className:\"invite-button\",onClick:()=>showInvite(profile.profile.user),children:\"Invite\"}):'',activeProfileId===profile.profile.user&&/*#__PURE__*/_jsx(\"div\",{className:\"right-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"invite-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"invite-profile-container\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"invite-input\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"Enter your message here...\"}),/*#__PURE__*/_jsx(\"button\",{className:\"invite-button\",onClick:()=>handleInvite(profile.profile.user),children:\"Invite to Connect\"}),/*#__PURE__*/_jsx(\"button\",{className:\"skip-button\",onClick:closeInvite,style:{backgroundColor:'red'},children:\"Close\"})]})})})]},profile.profile.user))});};export default SkippedProfiles;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axiosInstance","jwtDecode","jwt_decode","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","SkippedProfiles","skippedProfiles","setSkippedProfiles","navigate","activeProfileId","setActiveProfileId","message","setMessage","fetchSkippedProfiles","response","get","data","error","console","showInvite","profileId","closeInvite","handleInvite","skippedProfileId","groupChat","post","receiverId","_id","status","alert","className","children","map","profile","src","profilePicture","alt","name","introduceYourself","hasConnection","onClick","user","value","onChange","e","target","placeholder","style","backgroundColor"],"sources":["/Users/guusvanrees/Documents/Programming/projects/SET/client/src/components/BuyersSellers/SkippedProfiles.js"],"sourcesContent":["// src/components/MyAccount.js\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useHistory from react-router-dom\nimport axiosInstance from '../Auth/AxiosInstance'; // Assuming AxiosInstance is set up for authenticated requests\nimport { jwtDecode as jwt_decode } from 'jwt-decode'; // if you want to keep calling it jwt_decode\nimport './styles/ProfilesDisplay.css';\n\nconst API_URL = process.env.REACT_APP_API_URL; // Access the base URL from environment variable\n\nconst SkippedProfiles = () => {\n\n  const [skippedProfiles, setSkippedProfiles] = useState([]);\n  const navigate = useNavigate();\n  const [activeProfileId, setActiveProfileId] = useState(null);\n  const [message, setMessage] = useState('');\n\n  const fetchSkippedProfiles = async () => {\n    try {\n      const response = await axiosInstance.get(`${API_URL}/api/message/skipped`);\n      setSkippedProfiles(response.data);\n    } catch (error) {\n      console.error('Error fetching skipped profiles:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchSkippedProfiles();\n  }, []);\n\n  const showInvite = (profileId) => {\n    setActiveProfileId(profileId); // Set the active profile ID to the clicked profile\n  };\n\n  const closeInvite = () => {\n    setActiveProfileId(null); // Clear the active profile ID to close the pop-up\n  };\n\n  const handleInvite = async (skippedProfileId) => {\n    // Implement your invite functionality here\n      try {\n        // creates group chat\n        \n        const groupChat = await axiosInstance.post(`${API_URL}/api/groupchat/create`, {\n          receiverId: skippedProfileId\n        })\n  \n        if (message === '')\n        {\n          setMessage('Hey! Glad to connect!');\n        }\n  \n        const response = await axiosInstance.post(`${API_URL}/api/groupchat/${groupChat.data.groupChat._id}/message`, {\n          message: message, // Message content\n        });\n  \n        setMessage('');\n  \n        if (response.status === 201) {\n          alert('Invitation sent successfully!');\n          closeInvite(); // Close the pop-up\n          fetchSkippedProfiles();\n        } else {\n          alert(`Failed to send invitation: ${response.data.error}`);\n        }\n      } catch (error) {\n        console.error('Error sending invitation:', error);\n        alert('Failed to send invitation. Please try again later.');\n      }\n    };\n\n  return (\n      <div className=\"profiles-container\">\n  \n          {skippedProfiles.map(profile => (\n  \n          <div className=\"profile-card\" key={profile.profile.user}>\n            <img\n              src={profile.profile.profilePicture ? `${API_URL}${profile.profile.profilePicture}` : ''} // Default image if not available\n              alt={profile.profile.name}\n              className=\"profile-picture\"\n            />\n            <h3 className=\"profile-name\">{profile.profile.name}</h3>\n            <p className=\"about-section\">{profile.profile.introduceYourself}</p>\n            {profile.hasConnection ? (\n              <button className=\"invite-button\" onClick={() => navigate(`/group-chat/${profile.groupChat._id}`)}>\n              View Chat\n            </button> ) : \n            (\n              activeProfileId !== profile.profile.user ? (<button className=\"invite-button\" onClick={() => showInvite(profile.profile.user)}>\n              Invite\n            </button>) : ''\n              \n            )}\n            \n            {activeProfileId === profile.profile.user && (\n            <div className=\"right-box\">\n              <div className=\"invite-box\">\n                <div className=\"invite-profile-container\">\n                  <textarea\n                    className=\"invite-input\"\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                    placeholder=\"Enter your message here...\"\n                  />\n                  <button\n                    className=\"invite-button\"\n                    onClick={() => handleInvite(profile.profile.user)}\n                  >\n                    Invite to Connect\n                  </button>\n                  <button className=\"skip-button\" onClick={closeInvite} style={{backgroundColor: 'red'}}>\n                    Close\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n              \n            \n            </div>\n            \n          ))}\n      </div>\n      \n  );\n};\n\nexport default SkippedProfiles;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}